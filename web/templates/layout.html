<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}SCUM Admin{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body id="body">
    <div class="sidebar">
        <div class="sidebar-title">‚öôÔ∏è SCUM Admin</div>
        <a href="/">üè† Home</a>
        <a href="/items">üõí Shop Items</a>
        <a href="/players">üßç Players</a>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>{% block header %}SCUM Admin Panel{% endblock %}</h1>
            <button id="toggle-dark-mode" class="toggle-btn">üåì</button>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <script>
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const savedTheme = localStorage.getItem('theme');

        function applyTheme(theme) {
            const body = document.getElementById("body");
            if (theme === 'dark') {
                body.classList.add("dark-mode");
                localStorage.setItem("theme", "dark");
            } else {
                body.classList.remove("dark-mode");
                localStorage.setItem("theme", "light");
            }
        }

        function toggleDarkMode() {
            const isDark = document.getElementById("body").classList.contains("dark-mode");
            applyTheme(isDark ? "light" : "dark");
        }

        window.onload = function () {
            applyTheme(savedTheme || (prefersDark ? "dark" : "light"));
            document.getElementById("toggle-dark-mode").addEventListener("click", toggleDarkMode);
        };
    </script>
</body>
</html>
