{% extends "layout.html" %}

{% block content %}
<h2>Shop Items</h2>

<!-- Export/Import buttons (move this outside the table) -->
<div style="margin: 10px 0;">
  <a href="{{ url_for('export_items') }}" class="button">📤 Export Items</a>
  <a href="{{ url_for('import_items') }}" class="button">📥 Import Items</a>
</div>

<a href="{{ url_for('create_item') }}">➕ Add New Item</a>

<table border="1" cellpadding="6" cellspacing="0">
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Price</th>
    <th>Description</th>
    <th>Spawn Commands</th>
    <th>Image</th>
    <th>Actions</th>
  </tr>

  {% for item in items %}
    <tr>
      <td>{{ item.name }}</td>
      <td>{{ item.category }}</td>
      <td>{{ item.price | int }}</td>
      <td>{{ item.description or '—' }}</td>
      <td>
        {% if item.content %}
          <ul>
            {% for cmd in item.content %}
              <li>{{ cmd }}</li>
            {% endfor %}
          </ul>
        {% else %}
          No commands
        {% endif %}
      </td>
      <td>
        {% if item.image_url %}
          <img src="{{ item.image_url }}" alt="Image" style="height: 40px;">
        {% else %}
          No image
        {% endif %}
      </td>
      <td>
        <a href="{{ url_for('edit_item', item_id=item.id) }}">✏️ Edit</a>
        <form action="{{ url_for('delete_item', item_id=item.id) }}" method="POST" style="display:inline;">
          <button type="submit" onclick="return confirm('Are you sure you want to delete this item?');">🗑️ Delete</button>
        </form>
      </td>
    </tr>
  {% endfor %}
</table>
{% endblock %}
